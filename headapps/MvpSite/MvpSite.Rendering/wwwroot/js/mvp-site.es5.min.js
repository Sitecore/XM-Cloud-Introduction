"use strict";function timelineEventsHeightRecalculation(n,t){n.each(function(n,i){var u=$(i),r=undefined;u.find(".t-event").each(function(n,i){var u=$(i),f;t?u.css("height",""):(n%3==0&&u.next().length>0?u.height(50):n%3==1&&(f=r.children(".card").height(),u.height(f)),r=u)})})}function directorySearchClearHandler(){function i(){var i=new URLSearchParams(window.location.search);i.has(t)||(n.value="")}var n=document.getElementById("directory-search"),t;n&&(t="q",window.addEventListener("pageshow",i))}function setupMentorCheckboxBehavior(){var t=document.getElementById("IsMentor"),n=document.getElementById("IsOpenToNewMentees");t&&n&&(n.disabled=!t.checked,t.addEventListener("change",function(){n.disabled=!this.checked;this.checked||(n.checked=!1)}))}function CountryFacet(n){if(this.identifier=n,this.searchInput=document.getElementById("country-search-"+n),this.dropdown=document.getElementById("country-dropdown-"+n),this.hiddenInput=document.getElementById("country-hidden-"+n),!this.searchInput||!this.dropdown||!this.hiddenInput){console.warn("CountryFacet: Required elements not found for identifier: "+n);return}this.options=this.dropdown.querySelectorAll(".dropdown-option");this.cacheLoaded=!1;this.CACHE_KEY="mvp_full_countries_list";this.CACHE_PROTECTED_KEY="mvp_cache_protected";this.MIN_FULL_LIST_SIZE=10;this.init()}$(document).ready(function(){var t=$(window),i,u,f,n,e,o,r,s,h,c;if($("#search").keyup(function(n){n.which===13&&(n.preventDefault(),$("#gosearch").click())}),i=$("#addMoreReviewers"),i.length>0&&function(){var n=$("#addReviewerForm div.form-group")[0].outerHTML;i.click(function(){i.before(n)})}(),u=$(".countdown"),u.length>0&&u.each(function(n,t){var i=$(t),r=new Date(i.data("date")),u=i.children(".countdown-days"),f=i.children(".countdown-hours"),e=i.children(".countdown-minutes"),o=i.children(".countdown-seconds"),s=setInterval(function(){var t=(new Date).getTime(),h=new Date(t+(new Date).getTimezoneOffset()*6e4),n=r-h,c=Math.floor(n/864e5),l=Math.floor(n%864e5/36e5),a=Math.floor(n%36e5/6e4),v=Math.floor(n%6e4/1e3);u.text(c);f.text(l);e.text(a);o.text(v);n<=0&&(clearInterval(s),i.html("<span class='badge badge-danger'>Expired!<\/span>"))},1e3)}),f=$(".mvp-fp-directory"),f.length>0&&function(){var n=f.find("form");n.on("change","input:checkbox",function(){n.submit()});directorySearchClearHandler()}(),n=$(".timeline"),n.length>0){setTimeout(timelineEventsHeightRecalculation(n,t.width()<576),1e3);setTimeout(timelineEventsHeightRecalculation(n,t.width()<576),2e3);setTimeout(timelineEventsHeightRecalculation(n,t.width()<576),3e3);setTimeout(timelineEventsHeightRecalculation(n,t.width()<576),5e3);setTimeout(timelineEventsHeightRecalculation(n,t.width()<576),1e4);t.on("resize",function(){timelineEventsHeightRecalculation(n,t.width()<576)})}for(e=$(".textareacounter"),e.length>0&&e.each(function(n,t){var r=$(t),i=r.siblings("textarea"),u=i.attr("maxlength");i.on("input",function(){r.text(i.val().length+" / "+u)})}),o=document.querySelectorAll('[id^="country-search-"]'),r=0;r<o.length;r++)s=o[r],h=s.id.replace("country-search-",""),new CountryFacet(h);c=$(".mvp-fs-mvpmentordata");c.length>0&&setupMentorCheckboxBehavior()});CountryFacet.prototype.init=function(){this.setupCache();this.loadCachedCountries();this.setInitialValue();this.bindEvents()};CountryFacet.prototype.setupCache=function(){this.options.length>this.MIN_FULL_LIST_SIZE&&this.clearCache();this.updateCache()};CountryFacet.prototype.updateCache=function(){var t=localStorage.getItem(this.CACHE_PROTECTED_KEY),n;if(this.options.length>this.MIN_FULL_LIST_SIZE&&!this.cacheLoaded&&!t){n=this.extractCountriesData();try{localStorage.setItem(this.CACHE_KEY,JSON.stringify(n));localStorage.setItem(this.CACHE_PROTECTED_KEY,"true")}catch(i){console.warn("CountryFacet: Failed to cache countries data",i)}}};CountryFacet.prototype.extractCountriesData=function(){var n=this;return Array.from(this.options).map(function(n){var i=n.getAttribute("data-value"),r=n.getAttribute("data-display")||n.textContent.trim(),t=r.replace(/\s*\(\d+\)\s*$/,"");return{value:i,display:t,text:t}}).filter(function(n){return n.value!==""}).filter(function(n,t,i){return t===i.findIndex(function(t){return t.value===n.value})}).sort(function(n,t){return n.display.localeCompare(t.display)})};CountryFacet.prototype.getCachedCountries=function(){try{var n=localStorage.getItem(this.CACHE_KEY);return n?JSON.parse(n):null}catch(t){return console.warn("CountryFacet: Failed to parse cached countries",t),null}};CountryFacet.prototype.clearCache=function(){localStorage.removeItem(this.CACHE_KEY);localStorage.removeItem(this.CACHE_PROTECTED_KEY)};CountryFacet.prototype.loadCachedCountries=function(){var n=this.getCachedCountries();n&&this.options.length<=this.MIN_FULL_LIST_SIZE&&(this.cacheLoaded=!0,this.rebuildDropdown(n))};CountryFacet.prototype.rebuildDropdown=function(n){var i=this.hiddenInput.value,r,t;this.dropdown.innerHTML="";r=this.createAllCountriesOption(i);this.dropdown.appendChild(r);t=this;n.forEach(function(n){var r=t.createDropdownOption(n,i);t.dropdown.appendChild(r)});this.options=this.dropdown.querySelectorAll(".dropdown-option")};CountryFacet.prototype.createAllCountriesOption=function(n){var t=document.createElement("div"),i;return t.className="dropdown-option"+(n===""?" selected":""),t.setAttribute("data-value",""),t.setAttribute("data-display","All Countries"),t.textContent="All Countries",i=this,t.addEventListener("click",function(){i.selectCountry(t)}),t};CountryFacet.prototype.createDropdownOption=function(n,t){var i=document.createElement("div"),r;return i.className="dropdown-option",i.setAttribute("data-value",n.value),i.setAttribute("data-display",n.display),i.textContent=n.text,n.value===t&&i.classList.add("selected"),r=this,i.addEventListener("click",function(){r.selectCountry(i)}),i};CountryFacet.prototype.selectCountry=function(n){for(var i,r=this.dropdown.querySelectorAll(".dropdown-option"),t=0;t<r.length;t++)r[t].classList.remove("selected");n.classList.add("selected");i=n.getAttribute("data-value");this.hiddenInput.value=i;this.searchInput.value=i===""?"":n.getAttribute("data-display");this.hideDropdown();this.hiddenInput.form.submit()};CountryFacet.prototype.showDropdown=function(){this.dropdown.style.display="block";this.showAllOptions()};CountryFacet.prototype.hideDropdown=function(){this.dropdown.style.display="none"};CountryFacet.prototype.showAllOptions=function(){for(var t=this.dropdown.querySelectorAll(".dropdown-option"),n=0;n<t.length;n++)t[n].classList.remove("hidden")};CountryFacet.prototype.filterOptions=function(n){var r,i,t,u;if(n===""){this.showAllOptions();return}for(r=n.toLowerCase(),i=this.dropdown.querySelectorAll(".dropdown-option"),t=0;t<i.length;t++)u=i[t].textContent.toLowerCase().indexOf(r)!==-1,u?i[t].classList.remove("hidden"):i[t].classList.add("hidden")};CountryFacet.prototype.setInitialValue=function(){var n=this.dropdown.querySelector(".dropdown-option.selected");this.searchInput.value=n&&n.getAttribute("data-value")!==""?n.getAttribute("data-display")||"":""};CountryFacet.prototype.bindEvents=function(){var n=this,t;for(this.searchInput.addEventListener("focus",function(){n.showDropdown()}),this.searchInput.addEventListener("input",function(t){n.showDropdown();n.filterOptions(t.target.value)}),document.addEventListener("click",function(t){n.searchInput.contains(t.target)||n.dropdown.contains(t.target)||n.hideDropdown()}),t=0;t<this.options.length;t++)this.options[t].addEventListener("click",function(){n.selectCountry(this)})};